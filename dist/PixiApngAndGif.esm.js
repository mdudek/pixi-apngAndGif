import*as t from"pako";import{Ticker as e}from"@pixi/ticker";import{Sprite as r}from"@pixi/sprite";import{BaseTexture as a,Texture as i}from"@pixi/core";import{Rectangle as n}from"@pixi/math";var s=function(){function t(t){this.frames=[],this.loop_count=null,this.buf=void 0,this.width=void 0,this.height=void 0,this.buf=t;var e=0;if(71!==t[e++]||73!==t[e++]||70!==t[e++]||56!==t[e++]||56!=(t[e++]+1&253)||97!==t[e++])throw new Error("Invalid GIF 87a/89a header.");var r=t[e++]|t[e++]<<8,a=t[e++]|t[e++]<<8,i=t[e++],n=1<<1+(7&i);e++,e++;var s=null,o=null;i>>7&&(s=e,o=n,e+=3*n);var f=!0,h=0,u=null,l=0;for(this.width=r,this.height=a;f&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(11!==t[e]||78==t[e+1]&&69==t[e+2]&&84==t[e+3]&&83==t[e+4]&&67==t[e+5]&&65==t[e+6]&&80==t[e+7]&&69==t[e+8]&&50==t[e+9]&&46==t[e+10]&&48==t[e+11]&&3==t[e+12]&&1==t[e+13]&&0==t[e+16])e+=14,this.loop_count=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((A=t[e++])>=0))throw Error("Invalid block size");if(0===A)break;e+=A}break;case 249:if(4!==t[e++]||0!==t[e+4])throw new Error("Invalid graphics extension block.");var c=t[e++];h=t[e++]|t[e++]<<8,u=t[e++],0==(1&c)&&(u=null),l=c>>2&7,e++;break;case 254:for(;;){if(!((A=t[e++])>=0))throw Error("Invalid block size");if(0===A)break;e+=A}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var d=t[e++]|t[e++]<<8,v=t[e++]|t[e++]<<8,p=t[e++]|t[e++]<<8,m=t[e++]|t[e++]<<8,g=t[e++],w=g>>6&1,y=1<<1+(7&g),b=s,_=o,x=!1;g>>7&&(x=!0,b=e,_=y,e+=3*y);var I=e;for(e++;;){var A;if(!((A=t[e++])>=0))throw Error("Invalid block size");if(0===A)break;e+=A}this.frames.push({x:d,y:v,width:p,height:m,has_local_palette:x,palette_offset:b,palette_size:_,data_offset:I,data_length:e-I,transparent_index:u,interlaced:!!w,delay:h,disposal:l});break;case 59:f=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}}var e=t.prototype;return e.numFrames=function(){return this.frames.length},e.loopCount=function(){return this.loop_count},e.frameInfo=function(t){if(t<0||t>=this.frames.length)throw new Error("Frame index out of range.");return this.frames[t]},e.decodeAndBlitFrameBGRA=function(t,e){var r=this.frameInfo(t),a=r.width*r.height,i=new Uint8Array(a);o(this.buf,r.data_offset,i,a);var n=r.palette_offset,s=r.transparent_index;null===s&&(s=256);var f=r.width,h=this.width-f,u=f,l=4*(r.y*this.width+r.x),c=4*((r.y+r.height)*this.width+r.x),d=l,v=4*h;!0===r.interlaced&&(v+=4*this.width*7);for(var p=8,m=0,g=i.length;m<g;++m){var w=i[m];if(0===u&&(u=f,(d+=v)>=c&&(v=4*h+4*this.width*(p-1),d=l+(f+h)*(p<<1),p>>=1)),w===s)d+=4;else{var y=this.buf[n+3*w],b=this.buf[n+3*w+1];e[d++]=this.buf[n+3*w+2],e[d++]=b,e[d++]=y,e[d++]=255}--u}},e.decodeAndBlitFrameRGBA=function(t,e){var r=this.frameInfo(t),a=r.width*r.height,i=new Uint8Array(a);o(this.buf,r.data_offset,i,a);var n=r.palette_offset,s=r.transparent_index;null===s&&(s=256);var f=r.width,h=this.width-f,u=f,l=4*(r.y*this.width+r.x),c=4*((r.y+r.height)*this.width+r.x),d=l,v=4*h;!0===r.interlaced&&(v+=4*this.width*7);for(var p=8,m=0,g=i.length;m<g;++m){var w=i[m];if(0===u&&(u=f,(d+=v)>=c&&(v=4*h+4*this.width*(p-1),d=l+(f+h)*(p<<1),p>>=1)),w===s)d+=4;else{var y=this.buf[n+3*w+1],b=this.buf[n+3*w+2];e[d++]=this.buf[n+3*w],e[d++]=y,e[d++]=b,e[d++]=255}--u}},t}();function o(t,e,r,a){for(var i=t[e++],n=1<<i,s=n+1,o=s+1,f=i+1,h=(1<<f)-1,u=0,l=0,c=0,d=t[e++],v=new Int32Array(4096),p=null;;){for(;u<16&&0!==d;)l|=t[e++]<<u,u+=8,1===d?d=t[e++]:--d;if(u<f)break;var m=l&h;if(l>>=f,u-=f,m!==n){if(m===s)break;for(var g=m<o?m:p,w=0,y=g;y>n;)y=v[y]>>8,++w;var b=y;if(c+w+(g!==m?1:0)>a)return void console.log("Warning, gif stream longer than expected.");r[c++]=b;var _=c+=w;for(g!==m&&(r[c++]=b),y=g;w--;)r[--_]=255&(y=v[y]),y>>=8;null!==p&&o<4096&&(v[o++]=p<<8|b,o>=h+1&&f<12&&(++f,h=h<<1|1)),p=m}else o=s+1,h=(1<<(f=i+1))-1,p=null}return c!==a&&console.log("Warning, gif stream shorter than expected."),r}Uint8Array&&!Uint8Array.prototype.slice&&(Uint8Array.prototype.slice=function(){var t;return(t=new Uint8Array(this)).subarray.apply(t,[].slice.call(arguments))});var f=function(){function t(){}return t.decodeImage=function(t,e,r,a){var i=e*r,n=h._getBPP(a),s=Math.ceil(e*n/8),o=new Uint8Array(4*i),f=new Uint32Array(o.buffer),l=a.ctype,c=a.depth,d=u.readUshort;if(6==l){var v=i<<2;if(8==c)for(var p=0;p<v;p++)o[p]=t[p];if(16==c)for(var m=0;m<v;m++)o[m]=t[m<<1]}else if(2==l){var g=a.tabs.tRNS,w=-1,y=-1,b=-1;if(g&&(w=g[0],y=g[1],b=g[2]),8==c)for(var _=0;_<i;_++){var x=_<<2,I=3*_;o[x]=t[I],o[x+1]=t[I+1],o[x+2]=t[I+2],o[x+3]=255,-1!=w&&t[I]==w&&t[I+1]==y&&t[I+2]==b&&(o[x+3]=0)}if(16==c)for(var A=0;A<i;A++){var U=A<<2,k=6*A;o[U]=t[k],o[U+1]=t[k+2],o[U+2]=t[k+4],o[U+3]=255,-1!=w&&d(t,k)==w&&d(t,k+2)==y&&d(t,k+4)==b&&(o[U+3]=0)}}else if(3==l){var T=a.tabs.PLTE,E=a.tabs.tRNS,S=E?E.length:0;if(1==c)for(var R=0;R<r;R++)for(var C=R*s,D=R*e,B=0;B<e;B++){var M=D+B<<2,P=t[C+(B>>3)]>>7-((7&B)<<0)&1,F=3*P;o[M]=T[F],o[M+1]=T[F+1],o[M+2]=T[F+2],o[M+3]=P<S?E[P]:255}if(2==c)for(var L=0;L<r;L++)for(var Z=L*s,G=L*e,N=0;N<e;N++){var H=G+N<<2,z=t[Z+(N>>2)]>>6-((3&N)<<1)&3,W=3*z;o[H]=T[W],o[H+1]=T[W+1],o[H+2]=T[W+2],o[H+3]=z<S?E[z]:255}if(4==c)for(var X=0;X<r;X++)for(var j=X*s,K=X*e,Y=0;Y<e;Y++){var q=K+Y<<2,J=t[j+(Y>>1)]>>4-((1&Y)<<2)&15,O=3*J;o[q]=T[O],o[q+1]=T[O+1],o[q+2]=T[O+2],o[q+3]=J<S?E[J]:255}if(8==c)for(var Q=0;Q<i;Q++){var V=Q<<2,$=t[Q],tt=3*$;o[V]=T[tt],o[V+1]=T[tt+1],o[V+2]=T[tt+2],o[V+3]=$<S?E[$]:255}}else if(4==l){if(8==c)for(var et=0;et<i;et++){var rt=et<<2,at=et<<1,it=t[at];o[rt]=it,o[rt+1]=it,o[rt+2]=it,o[rt+3]=t[at+1]}if(16==c)for(var nt=0;nt<i;nt++){var st=nt<<2,ot=nt<<2,ft=t[ot];o[st]=ft,o[st+1]=ft,o[st+2]=ft,o[st+3]=t[ot+2]}}else if(0==l){var ht=a.tabs.tRNS?a.tabs.tRNS:-1;if(1==c)for(var ut=0;ut<i;ut++){var lt=255*(t[ut>>3]>>7-(7&ut)&1);f[ut]=(lt==255*ht?0:255)<<24|lt<<16|lt<<8|lt}if(2==c)for(var ct=0;ct<i;ct++){var dt=85*(t[ct>>2]>>6-((3&ct)<<1)&3);f[ct]=(dt==85*ht?0:255)<<24|dt<<16|dt<<8|dt}if(4==c)for(var vt=0;vt<i;vt++){var pt=17*(t[vt>>1]>>4-((1&vt)<<2)&15);f[vt]=(pt==17*ht?0:255)<<24|pt<<16|pt<<8|pt}if(8==c)for(var mt=0;mt<i;mt++){var gt=t[mt];f[mt]=(gt==ht?0:255)<<24|gt<<16|gt<<8|gt}if(16==c)for(var wt=0;wt<i;wt++){var yt=t[wt<<1],bt=d(t,wt<<1)==ht?0:255;f[wt]=bt<<24|yt<<16|yt<<8|yt}}return o},t}(),h=function(){function e(){}return e._decompress=function(t,r,a,i){return 0==t.compress&&(r=e._inflate(r)),0==t.interlace?r=e._filterZero(r,t,0,a,i):1==t.interlace&&(r=e._readInterlace(r,t)),r},e._inflate=function(e){return t.inflate(e)},e._readInterlace=function(t,r){for(var a=r.width,i=r.height,n=e._getBPP(r),s=n>>3,o=Math.ceil(a*n/8),f=new Uint8Array(i*o),h=0,u=[0,0,4,0,2,0,1],l=[0,4,0,2,0,1,0],c=[8,8,8,4,4,2,2],d=[8,8,4,4,2,2,1],v=0;v<7;){for(var p=c[v],m=d[v],g=0,w=0,y=u[v];y<i;)y+=p,w++;for(var b=l[v];b<a;)b+=m,g++;var _=Math.ceil(g*n/8);e._filterZero(t,r,h,g,w);for(var x=0,I=u[v];I<i;){for(var A=l[v],U=h+x*_<<3;A<a;){if(1==n){var k=t[U>>3];f[I*o+(A>>3)]|=(k=k>>7-(7&U)&1)<<7-((3&A)<<0)}if(2==n){var T=t[U>>3];f[I*o+(A>>2)]|=(T=T>>6-(7&U)&3)<<6-((3&A)<<1)}if(4==n){var E=t[U>>3];f[I*o+(A>>1)]|=(E=E>>4-(7&U)&15)<<4-((1&A)<<2)}if(n>=8)for(var S=I*o+A*s,R=0;R<s;R++)f[S+R]=t[(U>>3)+R];U+=n,A+=m}x++,I+=p}g*w!=0&&(h+=w*(1+_)),v+=1}return f},e._getBPP=function(t){return[1,null,3,1,2,null,4][t.ctype]*t.depth},e._filterZero=function(t,r,a,i,n){var s=e._getBPP(r),o=Math.ceil(i*s/8),f=e._paeth;s=Math.ceil(s/8);for(var h=0;h<n;h++){var u=a+h*o,l=u+h+1,c=t[l-1];if(0==c)for(var d=0;d<o;d++)t[u+d]=t[l+d];else if(1==c){for(var v=0;v<s;v++)t[u+v]=t[l+v];for(var p=s;p<o;p++)t[u+p]=t[l+p]+t[u+p-s]&255}else if(0==h){for(var m=0;m<s;m++)t[u+m]=t[l+m];if(2==c)for(var g=s;g<o;g++)t[u+g]=255&t[l+g];if(3==c)for(var w=s;w<o;w++)t[u+w]=t[l+w]+(t[u+w-s]>>1)&255;if(4==c)for(var y=s;y<o;y++)t[u+y]=t[l+y]+f(t[u+y-s],0,0)&255}else{if(2==c)for(var b=0;b<o;b++)t[u+b]=t[l+b]+t[u+b-o]&255;if(3==c){for(var _=0;_<s;_++)t[u+_]=t[l+_]+(t[u+_-o]>>1)&255;for(var x=s;x<o;x++)t[u+x]=t[l+x]+(t[u+x-o]+t[u+x-s]>>1)&255}if(4==c){for(var I=0;I<s;I++)t[u+I]=t[l+I]+f(0,t[u+I-o],0)&255;for(var A=s;A<o;A++)t[u+A]=t[l+A]+f(t[u+A-s],t[u+A-o],t[u+A-s-o])&255}}}return t},e._paeth=function(t,e,r){var a=t+e-r,i=Math.abs(a-t),n=Math.abs(a-e),s=Math.abs(a-r);return i<=n&&i<=s?t:n<=s?e:r},e._IHDR=function(t,e,r){var a=u;r.width=a.readUint(t,e),r.height=a.readUint(t,e+=4),r.depth=t[e+=4],e++,r.ctype=t[e],e++,r.compress=t[e],e++,r.filter=t[e],e++,r.interlace=t[e],e++},e}(),u=function(){function t(){}return t.nextZero=function(t,e){for(;0!=t[e];)e++;return e},t.readUshort=function(t,e){return t[e]<<8|t[e+1]},t.writeUshort=function(t,e,r){t[e]=r>>8&255,t[e+1]=255&r},t.readUint=function(t,e){return 16777216*t[e]+(t[e+1]<<16|t[e+2]<<8|t[e+3])},t.writeUint=function(t,e,r){t[e]=r>>24&255,t[e+1]=r>>16&255,t[e+2]=r>>8&255,t[e+3]=255&r},t.readASCII=function(t,e,r){for(var a="",i=0;i<r;i++)a+=String.fromCharCode(t[e+i]);return a},t.writeASCII=function(t,e,r){for(var a=0;a<r.length;a++)t[e+a]=r.charCodeAt(a)},t.readBytes=function(t,e,r){for(var a=[],i=0;i<r;i++)a.push(t[e+i]);return a},t.pad=function(t){return t.length<2?"0"+t:t},t.readUTF8=function(e,r,a){for(var i,n="",s=0;s<a;s++)n+="%"+t.pad(e[r+s].toString(16));try{i=decodeURIComponent(n)}catch(i){return t.readASCII(e,r,a)}return i},t}();function l(t,e,r,a,i,n,s,o,f){for(var h=Math.min(e,i),u=Math.min(r,n),l=0,c=0,d=0;d<u;d++)for(var v=0;v<h;v++)if(s>=0&&o>=0?(l=d*e+v<<2,c=(o+d)*i+s+v<<2):(l=(-o+d)*e-s+v<<2,c=d*i+v<<2),0==f)a[c]=t[l],a[c+1]=t[l+1],a[c+2]=t[l+2],a[c+3]=t[l+3];else if(1==f){var p=t[l+3]*(1/255),m=t[l]*p,g=t[l+1]*p,w=t[l+2]*p,y=a[c+3]*(1/255),b=a[c]*y,_=a[c+1]*y,x=a[c+2]*y,I=1-p,A=p+y*I,U=0==A?0:1/A;a[c+3]=255*A,a[c+0]=(m+b*I)*U,a[c+1]=(g+_*I)*U,a[c+2]=(w+x*I)*U}else if(2==f){var k=t[l+3],T=t[l],E=t[l+1],S=t[l+2];k==a[c+3]&&T==a[c]&&E==a[c+1]&&S==a[c+2]?(a[c]=0,a[c+1]=0,a[c+2]=0,a[c+3]=0):(a[c]=T,a[c+1]=E,a[c+2]=S,a[c+3]=k)}else if(3==f){var R=t[l+3],C=a[c+3];if(R==C&&t[l]==a[c]&&t[l+1]==a[c+1]&&t[l+2]==a[c+2])continue;if(R<220&&C>20)return!1}return!0}var c=function(){function t(t,e){this.esource=void 0,this.resources=void 0,this.temp=void 0,this.__method=void 0,this.__attr=void 0,this.__status=void 0,this.ticker=void 0,this.sprite=void 0,this.textures=void 0,this.framesDelay=void 0,this.esource=t,this.resources=e,this.init()}var o=t.prototype;return o.init=function(){this.temp={events:{}},this.__attr={autoPlay:!0,loop:0},this.__method={play:this.play},this.__status={status:"init",frame:0,loops:0,time:0},this.ticker=new e,this.ticker.stop(),this.sprite=this.createSprite(this.esource,this.resources)},o.play=function(t,r){var a=this;if(!this.textures.length)throw new Error("没有可用的textures");if(1!==this.textures.length){var i=this.__status,n=this.__attr,s=0;"stop"===i.status&&(i.loops=0),this.temp.loop=t="number"==typeof t?t:n.loop,n.loop=t,this.temp.tickerIsAdd||(this.ticker.add(function(t){(s+=e.shared.elapsedMS)>a.framesDelay[i.frame]&&(i.frame++,i.status="playing",i.frame>a.textures.length-1&&(i.frame=0,i.loops++,a.temp.loop>0&&i.loops>=a.temp.loop&&("function"==typeof r&&r(i),i.status="played",a.runEvent("played",i),a.stop())),a.sprite.texture=a.textures[i.frame],s=0,a.runEvent("playing",i))}),this.temp.tickerIsAdd=!0),this.ticker.start()}},o.pause=function(){var t=this,e=t.__status;t.ticker.stop(),e.status="pause",t.runEvent("pause",e)},o.stop=function(){var t=this,e=t.__status;t.ticker.stop(),e.status="stop",t.runEvent("stop",e)},o.jumpToFrame=function(t){var e=this,r=e.textures;if(!r.length)throw new Error("没有可用的textures");var a=e.__status;"number"==typeof(t=t<0?0:t>r.length-1?r.length-1:t)&&(e.sprite.texture=r[t],a.frame=t)},o.getDuration=function(){var t=this.framesDelay;if(!t.length)throw new Error("未找到图片帧时间");for(var e=0,r=0,a=t.length;r<a;r++)e+=t[r];return e},o.getFramesLength=function(){if(!this.textures.length)throw new Error("没有可用的textures");return this.textures.length},o.on=function(t,e){switch(t){case"playing":case"played":case"pause":case"stop":this.temp.events[t]=e;break;default:throw new Error("无效的事件")}},o.runEvent=function(t,e){var r=this.temp;"function"==typeof r.events[t]&&r.events[t](e)},o.createSprite=function(t,e){var a,i=this,n=t,s=(a=n.toLocaleLowerCase().split("."))[a.length-1];return{gif:function(){var t=i.gifResourceToTextures(e[n]);return i.textures=t.textures,i.framesDelay=t.delayTimes,i.play(),new r(i.textures[0])},png:function(){var t=i.apngResourceToTextures(e[n]);return i.textures=t.textures,i.framesDelay=t.delayTimes,i.play(),new r(i.textures[0])},other:function(){return i.textures=[e[n].texture],new r(e[n].texture)}}[s="gif"===s||"png"===s?s:"other"]()},o.apngResourceToTextures=function(t){var e,r,s,o,c={delayTimes:[],textures:[]},d=function(t){for(var e,r=new Uint8Array(t),a=8,i=u,n=i.readUshort,s=i.readUint,o={tabs:{},frames:[],ctype:null,data:null,width:null,height:null,compress:null,interlace:null,filter:null},f=new Uint8Array(r.length),l=0,c=0,d=[137,80,78,71,13,10,26,10],v=0;v<8;v++)if(r[v]!=d[v])throw"The input is not a PNG file!";for(;a<r.length;){var p=i.readUint(r,a),m=i.readASCII(r,a+=4,4);if(a+=4,"IHDR"==m)h._IHDR(r,a,o);else if("IDAT"==m){for(var g=0;g<p;g++)f[l+g]=r[a+g];l+=p}else if("acTL"==m)o.tabs[m]={num_frames:s(r,a),num_plays:s(r,a+4)},e=new Uint8Array(r.length);else if("fcTL"==m){if(0!=c){var w=o.frames[o.frames.length-1];w.data=h._decompress(o,e.slice(0,c),w.rect.width,w.rect.height),c=0}var y={x:s(r,a+12),y:s(r,a+16),width:s(r,a+4),height:s(r,a+8)},b=n(r,a+22);b=n(r,a+20)/(0==b?100:b);var _={rect:y,delay:Math.round(1e3*b),dispose:r[a+24],blend:r[a+25]};o.frames.push(_)}else if("fdAT"==m){for(var x=0;x<p-4;x++)e[c+x]=r[a+x+4];c+=p-4}else if("pHYs"==m)o.tabs[m]=[i.readUint(r,a),i.readUint(r,a+4),r[a+8]];else if("cHRM"==m){o.tabs[m]=[];for(var I=0;I<8;I++)o.tabs[m].push(i.readUint(r,a+4*I))}else if("tEXt"==m){null==o.tabs[m]&&(o.tabs[m]={});var A=i.nextZero(r,a),U=i.readASCII(r,a,A-a),k=i.readASCII(r,A+1,a+p-A-1);o.tabs[m][U]=k}else if("iTXt"==m){null==o.tabs[m]&&(o.tabs[m]={});var T=0,E=a;T=i.nextZero(r,E);var S=i.readASCII(r,E,T-E);E=T+1,T=i.nextZero(r,E+=2),i.readASCII(r,E,T-E),T=i.nextZero(r,E=T+1),i.readUTF8(r,E,T-E);var R=i.readUTF8(r,E=T+1,p-(E-a));o.tabs[m][S]=R}else if("PLTE"==m)o.tabs[m]=i.readBytes(r,a,p);else if("hIST"==m){var C=o.tabs.PLTE.length/3;o.tabs[m]=[];for(var D=0;D<C;D++)o.tabs[m].push(n(r,a+2*D))}else if("tRNS"==m)3==o.ctype?o.tabs[m]=i.readBytes(r,a,p):0==o.ctype?o.tabs[m]=n(r,a):2==o.ctype&&(o.tabs[m]=[n(r,a),n(r,a+2),n(r,a+4)]);else if("gAMA"==m)o.tabs[m]=i.readUint(r,a)/1e5;else if("sRGB"==m)o.tabs[m]=r[a];else if("bKGD"==m)0==o.ctype||4==o.ctype?o.tabs[m]=[n(r,a)]:2==o.ctype||6==o.ctype?o.tabs[m]=[n(r,a),n(r,a+2),n(r,a+4)]:3==o.ctype&&(o.tabs[m]=r[a]);else if("IEND"==m)break;i.readUint(r,a+=p),a+=4}if(0!=c){var B=o.frames[o.frames.length-1];B.data=h._decompress(o,e.slice(0,c),B.rect.width,B.rect.height),c=0}return o.data=h._decompress(o,f,o.width,o.height),delete o.compress,delete o.interlace,delete o.filter,o}(new Uint8Array(t.data)),v=function(t){var e=t.width,r=t.height;if(null==t.tabs.acTL)return[f.decodeImage(t.data,e,r,t).buffer];var a=[];null==t.frames[0].data&&(t.frames[0].data=t.data);for(var i,n=new Uint8Array(e*r*4),s=0;s<t.frames.length;s++){var o=t.frames[s],h=o.rect.x,u=o.rect.y,c=o.rect.width,d=o.rect.height,v=f.decodeImage(o.data,c,d,t);if(0==s?i=v:0==o.blend?l(v,c,d,i,e,r,h,u,0):1==o.blend&&l(v,c,d,i,e,r,h,u,1),a.push(i.buffer),i=i.slice(0),0==o.dispose);else if(1==o.dispose)l(n,c,d,i,e,r,h,u,0);else if(2==o.dispose){for(var p=s-1;2==t.frames[p].dispose;)p--;i=new Uint8Array(a[p]).slice(0)}}return a}(d),p=d.width,m=d.height;d.frames.forEach(function(t,e){c.delayTimes.push(t.delay)});for(var g=0,w=v.length;g<w;g++){var y=new Uint8ClampedArray(v[g]);(r=document.createElement("canvas")).width=p,r.height=m,s=r.getContext("2d"),e=a.from(r),(o=s.createImageData(p,m)).data.set(y),s.putImageData(o,0,0),c.textures.push(new i(e,new n(0,0,p,m)))}return c},o.gifResourceToTextures=function(t){for(var e,r,o,f,h,u={delayTimes:[],textures:[]},l=new Uint8Array(t.data),c=new s(l),d=c.width,v=c.height,p=c.numFrames(),m=0;m<p;m++)e=c.frameInfo(m),u.delayTimes.push(10*e.delay),(o=document.createElement("canvas")).width=d,o.height=v,h=(f=o.getContext("2d")).createImageData(d,v),c.decodeAndBlitFrameRGBA(m,h.data),f.putImageData(h,0,0),r=a.from(o),u.textures.push(new i(r,new n(0,0,d,v)));return u},t}();export{c as default};
//# sourceMappingURL=PixiApngAndGif.esm.js.map
