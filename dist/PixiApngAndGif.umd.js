!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("pako"),require("@pixi/ticker"),require("@pixi/sprite"),require("@pixi/core"),require("@pixi/math")):"function"==typeof define&&define.amd?define(["pako","@pixi/ticker","@pixi/sprite","@pixi/core","@pixi/math"],t):(e||self).pixiApngandgif=t(e.pako,e.ticker,e.sprite,e.core,e.math)}(this,function(e,t,r,a,i){function n(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach(function(r){if("default"!==r){var a=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,a.get?a:{enumerable:!0,get:function(){return e[r]}})}}),t.default=e,t}var s=n(e),o=function(){function e(e){this.frames=[],this.loop_count=null,this.buf=void 0,this.width=void 0,this.height=void 0,this.buf=e;var t=0;if(71!==e[t++]||73!==e[t++]||70!==e[t++]||56!==e[t++]||56!=(e[t++]+1&253)||97!==e[t++])throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,a=e[t++]|e[t++]<<8,i=e[t++],n=1<<1+(7&i);t++,t++;var s=null,o=null;i>>7&&(s=t,o=n,t+=3*n);var f=!0,u=0,h=null,l=0;for(this.width=r,this.height=a;f&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(11!==e[t]||78==e[t+1]&&69==e[t+2]&&84==e[t+3]&&83==e[t+4]&&67==e[t+5]&&65==e[t+6]&&80==e[t+7]&&69==e[t+8]&&50==e[t+9]&&46==e[t+10]&&48==e[t+11]&&3==e[t+12]&&1==e[t+13]&&0==e[t+16])t+=14,this.loop_count=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((A=e[t++])>=0))throw Error("Invalid block size");if(0===A)break;t+=A}break;case 249:if(4!==e[t++]||0!==e[t+4])throw new Error("Invalid graphics extension block.");var c=e[t++];u=e[t++]|e[t++]<<8,h=e[t++],0==(1&c)&&(h=null),l=c>>2&7,t++;break;case 254:for(;;){if(!((A=e[t++])>=0))throw Error("Invalid block size");if(0===A)break;t+=A}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var d=e[t++]|e[t++]<<8,v=e[t++]|e[t++]<<8,p=e[t++]|e[t++]<<8,m=e[t++]|e[t++]<<8,g=e[t++],w=g>>6&1,y=1<<1+(7&g),b=s,x=o,_=!1;g>>7&&(_=!0,b=t,x=y,t+=3*y);var I=t;for(t++;;){var A;if(!((A=e[t++])>=0))throw Error("Invalid block size");if(0===A)break;t+=A}this.frames.push({x:d,y:v,width:p,height:m,has_local_palette:_,palette_offset:b,palette_size:x,data_offset:I,data_length:t-I,transparent_index:h,interlaced:!!w,delay:u,disposal:l});break;case 59:f=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}}var t=e.prototype;return t.numFrames=function(){return this.frames.length},t.loopCount=function(){return this.loop_count},t.frameInfo=function(e){if(e<0||e>=this.frames.length)throw new Error("Frame index out of range.");return this.frames[e]},t.decodeAndBlitFrameBGRA=function(e,t){var r=this.frameInfo(e),a=r.width*r.height,i=new Uint8Array(a);f(this.buf,r.data_offset,i,a);var n=r.palette_offset,s=r.transparent_index;null===s&&(s=256);var o=r.width,u=this.width-o,h=o,l=4*(r.y*this.width+r.x),c=4*((r.y+r.height)*this.width+r.x),d=l,v=4*u;!0===r.interlaced&&(v+=4*this.width*7);for(var p=8,m=0,g=i.length;m<g;++m){var w=i[m];if(0===h&&(h=o,(d+=v)>=c&&(v=4*u+4*this.width*(p-1),d=l+(o+u)*(p<<1),p>>=1)),w===s)d+=4;else{var y=this.buf[n+3*w],b=this.buf[n+3*w+1];t[d++]=this.buf[n+3*w+2],t[d++]=b,t[d++]=y,t[d++]=255}--h}},t.decodeAndBlitFrameRGBA=function(e,t){var r=this.frameInfo(e),a=r.width*r.height,i=new Uint8Array(a);f(this.buf,r.data_offset,i,a);var n=r.palette_offset,s=r.transparent_index;null===s&&(s=256);var o=r.width,u=this.width-o,h=o,l=4*(r.y*this.width+r.x),c=4*((r.y+r.height)*this.width+r.x),d=l,v=4*u;!0===r.interlaced&&(v+=4*this.width*7);for(var p=8,m=0,g=i.length;m<g;++m){var w=i[m];if(0===h&&(h=o,(d+=v)>=c&&(v=4*u+4*this.width*(p-1),d=l+(o+u)*(p<<1),p>>=1)),w===s)d+=4;else{var y=this.buf[n+3*w+1],b=this.buf[n+3*w+2];t[d++]=this.buf[n+3*w],t[d++]=y,t[d++]=b,t[d++]=255}--h}},e}();function f(e,t,r,a){for(var i=e[t++],n=1<<i,s=n+1,o=s+1,f=i+1,u=(1<<f)-1,h=0,l=0,c=0,d=e[t++],v=new Int32Array(4096),p=null;;){for(;h<16&&0!==d;)l|=e[t++]<<h,h+=8,1===d?d=e[t++]:--d;if(h<f)break;var m=l&u;if(l>>=f,h-=f,m!==n){if(m===s)break;for(var g=m<o?m:p,w=0,y=g;y>n;)y=v[y]>>8,++w;var b=y;if(c+w+(g!==m?1:0)>a)return void console.log("Warning, gif stream longer than expected.");r[c++]=b;var x=c+=w;for(g!==m&&(r[c++]=b),y=g;w--;)r[--x]=255&(y=v[y]),y>>=8;null!==p&&o<4096&&(v[o++]=p<<8|b,o>=u+1&&f<12&&(++f,u=u<<1|1)),p=m}else o=s+1,u=(1<<(f=i+1))-1,p=null}return c!==a&&console.log("Warning, gif stream shorter than expected."),r}Uint8Array&&!Uint8Array.prototype.slice&&(Uint8Array.prototype.slice=function(){var e;return(e=new Uint8Array(this)).subarray.apply(e,[].slice.call(arguments))});var u=function(){function e(){}return e.decodeImage=function(e,t,r,a){var i=t*r,n=h._getBPP(a),s=Math.ceil(t*n/8),o=new Uint8Array(4*i),f=new Uint32Array(o.buffer),u=a.ctype,c=a.depth,d=l.readUshort;if(6==u){var v=i<<2;if(8==c)for(var p=0;p<v;p++)o[p]=e[p];if(16==c)for(var m=0;m<v;m++)o[m]=e[m<<1]}else if(2==u){var g=a.tabs.tRNS,w=-1,y=-1,b=-1;if(g&&(w=g[0],y=g[1],b=g[2]),8==c)for(var x=0;x<i;x++){var _=x<<2,I=3*x;o[_]=e[I],o[_+1]=e[I+1],o[_+2]=e[I+2],o[_+3]=255,-1!=w&&e[I]==w&&e[I+1]==y&&e[I+2]==b&&(o[_+3]=0)}if(16==c)for(var A=0;A<i;A++){var k=A<<2,U=6*A;o[k]=e[U],o[k+1]=e[U+2],o[k+2]=e[U+4],o[k+3]=255,-1!=w&&d(e,U)==w&&d(e,U+2)==y&&d(e,U+4)==b&&(o[k+3]=0)}}else if(3==u){var T=a.tabs.PLTE,E=a.tabs.tRNS,S=E?E.length:0;if(1==c)for(var R=0;R<r;R++)for(var C=R*s,D=R*t,B=0;B<t;B++){var M=D+B<<2,P=e[C+(B>>3)]>>7-((7&B)<<0)&1,F=3*P;o[M]=T[F],o[M+1]=T[F+1],o[M+2]=T[F+2],o[M+3]=P<S?E[P]:255}if(2==c)for(var L=0;L<r;L++)for(var Z=L*s,G=L*t,N=0;N<t;N++){var j=G+N<<2,q=e[Z+(N>>2)]>>6-((3&N)<<1)&3,H=3*q;o[j]=T[H],o[j+1]=T[H+1],o[j+2]=T[H+2],o[j+3]=q<S?E[q]:255}if(4==c)for(var O=0;O<r;O++)for(var z=O*s,W=O*t,X=0;X<t;X++){var K=W+X<<2,Y=e[z+(X>>1)]>>4-((1&X)<<2)&15,J=3*Y;o[K]=T[J],o[K+1]=T[J+1],o[K+2]=T[J+2],o[K+3]=Y<S?E[Y]:255}if(8==c)for(var Q=0;Q<i;Q++){var V=Q<<2,$=e[Q],ee=3*$;o[V]=T[ee],o[V+1]=T[ee+1],o[V+2]=T[ee+2],o[V+3]=$<S?E[$]:255}}else if(4==u){if(8==c)for(var te=0;te<i;te++){var re=te<<2,ae=te<<1,ie=e[ae];o[re]=ie,o[re+1]=ie,o[re+2]=ie,o[re+3]=e[ae+1]}if(16==c)for(var ne=0;ne<i;ne++){var se=ne<<2,oe=ne<<2,fe=e[oe];o[se]=fe,o[se+1]=fe,o[se+2]=fe,o[se+3]=e[oe+2]}}else if(0==u){var ue=a.tabs.tRNS?a.tabs.tRNS:-1;if(1==c)for(var he=0;he<i;he++){var le=255*(e[he>>3]>>7-(7&he)&1);f[he]=(le==255*ue?0:255)<<24|le<<16|le<<8|le}if(2==c)for(var ce=0;ce<i;ce++){var de=85*(e[ce>>2]>>6-((3&ce)<<1)&3);f[ce]=(de==85*ue?0:255)<<24|de<<16|de<<8|de}if(4==c)for(var ve=0;ve<i;ve++){var pe=17*(e[ve>>1]>>4-((1&ve)<<2)&15);f[ve]=(pe==17*ue?0:255)<<24|pe<<16|pe<<8|pe}if(8==c)for(var me=0;me<i;me++){var ge=e[me];f[me]=(ge==ue?0:255)<<24|ge<<16|ge<<8|ge}if(16==c)for(var we=0;we<i;we++){var ye=e[we<<1],be=d(e,we<<1)==ue?0:255;f[we]=be<<24|ye<<16|ye<<8|ye}}return o},e}(),h=function(){function e(){}return e._decompress=function(t,r,a,i){return 0==t.compress&&(r=e._inflate(r)),0==t.interlace?r=e._filterZero(r,t,0,a,i):1==t.interlace&&(r=e._readInterlace(r,t)),r},e._inflate=function(e){return s.inflate(e)},e._readInterlace=function(t,r){for(var a=r.width,i=r.height,n=e._getBPP(r),s=n>>3,o=Math.ceil(a*n/8),f=new Uint8Array(i*o),u=0,h=[0,0,4,0,2,0,1],l=[0,4,0,2,0,1,0],c=[8,8,8,4,4,2,2],d=[8,8,4,4,2,2,1],v=0;v<7;){for(var p=c[v],m=d[v],g=0,w=0,y=h[v];y<i;)y+=p,w++;for(var b=l[v];b<a;)b+=m,g++;var x=Math.ceil(g*n/8);e._filterZero(t,r,u,g,w);for(var _=0,I=h[v];I<i;){for(var A=l[v],k=u+_*x<<3;A<a;){if(1==n){var U=t[k>>3];f[I*o+(A>>3)]|=(U=U>>7-(7&k)&1)<<7-((3&A)<<0)}if(2==n){var T=t[k>>3];f[I*o+(A>>2)]|=(T=T>>6-(7&k)&3)<<6-((3&A)<<1)}if(4==n){var E=t[k>>3];f[I*o+(A>>1)]|=(E=E>>4-(7&k)&15)<<4-((1&A)<<2)}if(n>=8)for(var S=I*o+A*s,R=0;R<s;R++)f[S+R]=t[(k>>3)+R];k+=n,A+=m}_++,I+=p}g*w!=0&&(u+=w*(1+x)),v+=1}return f},e._getBPP=function(e){return[1,null,3,1,2,null,4][e.ctype]*e.depth},e._filterZero=function(t,r,a,i,n){var s=e._getBPP(r),o=Math.ceil(i*s/8),f=e._paeth;s=Math.ceil(s/8);for(var u=0;u<n;u++){var h=a+u*o,l=h+u+1,c=t[l-1];if(0==c)for(var d=0;d<o;d++)t[h+d]=t[l+d];else if(1==c){for(var v=0;v<s;v++)t[h+v]=t[l+v];for(var p=s;p<o;p++)t[h+p]=t[l+p]+t[h+p-s]&255}else if(0==u){for(var m=0;m<s;m++)t[h+m]=t[l+m];if(2==c)for(var g=s;g<o;g++)t[h+g]=255&t[l+g];if(3==c)for(var w=s;w<o;w++)t[h+w]=t[l+w]+(t[h+w-s]>>1)&255;if(4==c)for(var y=s;y<o;y++)t[h+y]=t[l+y]+f(t[h+y-s],0,0)&255}else{if(2==c)for(var b=0;b<o;b++)t[h+b]=t[l+b]+t[h+b-o]&255;if(3==c){for(var x=0;x<s;x++)t[h+x]=t[l+x]+(t[h+x-o]>>1)&255;for(var _=s;_<o;_++)t[h+_]=t[l+_]+(t[h+_-o]+t[h+_-s]>>1)&255}if(4==c){for(var I=0;I<s;I++)t[h+I]=t[l+I]+f(0,t[h+I-o],0)&255;for(var A=s;A<o;A++)t[h+A]=t[l+A]+f(t[h+A-s],t[h+A-o],t[h+A-s-o])&255}}}return t},e._paeth=function(e,t,r){var a=e+t-r,i=Math.abs(a-e),n=Math.abs(a-t),s=Math.abs(a-r);return i<=n&&i<=s?e:n<=s?t:r},e._IHDR=function(e,t,r){var a=l;r.width=a.readUint(e,t),r.height=a.readUint(e,t+=4),r.depth=e[t+=4],t++,r.ctype=e[t],t++,r.compress=e[t],t++,r.filter=e[t],t++,r.interlace=e[t],t++},e}(),l=function(){function e(){}return e.nextZero=function(e,t){for(;0!=e[t];)t++;return t},e.readUshort=function(e,t){return e[t]<<8|e[t+1]},e.writeUshort=function(e,t,r){e[t]=r>>8&255,e[t+1]=255&r},e.readUint=function(e,t){return 16777216*e[t]+(e[t+1]<<16|e[t+2]<<8|e[t+3])},e.writeUint=function(e,t,r){e[t]=r>>24&255,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=255&r},e.readASCII=function(e,t,r){for(var a="",i=0;i<r;i++)a+=String.fromCharCode(e[t+i]);return a},e.writeASCII=function(e,t,r){for(var a=0;a<r.length;a++)e[t+a]=r.charCodeAt(a)},e.readBytes=function(e,t,r){for(var a=[],i=0;i<r;i++)a.push(e[t+i]);return a},e.pad=function(e){return e.length<2?"0"+e:e},e.readUTF8=function(t,r,a){for(var i,n="",s=0;s<a;s++)n+="%"+e.pad(t[r+s].toString(16));try{i=decodeURIComponent(n)}catch(i){return e.readASCII(t,r,a)}return i},e}();function c(e,t,r,a,i,n,s,o,f){for(var u=Math.min(t,i),h=Math.min(r,n),l=0,c=0,d=0;d<h;d++)for(var v=0;v<u;v++)if(s>=0&&o>=0?(l=d*t+v<<2,c=(o+d)*i+s+v<<2):(l=(-o+d)*t-s+v<<2,c=d*i+v<<2),0==f)a[c]=e[l],a[c+1]=e[l+1],a[c+2]=e[l+2],a[c+3]=e[l+3];else if(1==f){var p=e[l+3]*(1/255),m=e[l]*p,g=e[l+1]*p,w=e[l+2]*p,y=a[c+3]*(1/255),b=a[c]*y,x=a[c+1]*y,_=a[c+2]*y,I=1-p,A=p+y*I,k=0==A?0:1/A;a[c+3]=255*A,a[c+0]=(m+b*I)*k,a[c+1]=(g+x*I)*k,a[c+2]=(w+_*I)*k}else if(2==f){var U=e[l+3],T=e[l],E=e[l+1],S=e[l+2];U==a[c+3]&&T==a[c]&&E==a[c+1]&&S==a[c+2]?(a[c]=0,a[c+1]=0,a[c+2]=0,a[c+3]=0):(a[c]=T,a[c+1]=E,a[c+2]=S,a[c+3]=U)}else if(3==f){var R=e[l+3],C=a[c+3];if(R==C&&e[l]==a[c]&&e[l+1]==a[c+1]&&e[l+2]==a[c+2])continue;if(R<220&&C>20)return!1}return!0}return function(){function e(e,t){this.esource=void 0,this.resources=void 0,this.temp=void 0,this.__method=void 0,this.__attr=void 0,this.__status=void 0,this.ticker=void 0,this.sprite=void 0,this.textures=void 0,this.framesDelay=void 0,this.esource=e,this.resources=t,this.init()}var n=e.prototype;return n.init=function(){this.temp={events:{}},this.__attr={autoPlay:!0,loop:0},this.__method={play:this.play},this.__status={status:"init",frame:0,loops:0,time:0},this.ticker=new t.Ticker,this.ticker.stop(),this.sprite=this.createSprite(this.esource,this.resources)},n.play=function(e,r){var a=this;if(!this.textures.length)throw new Error("没有可用的textures");if(1!==this.textures.length){var i=this.__status,n=this.__attr,s=0;"stop"===i.status&&(i.loops=0),this.temp.loop=e="number"==typeof e?e:n.loop,n.loop=e,this.temp.tickerIsAdd||(this.ticker.add(function(e){(s+=t.Ticker.shared.elapsedMS)>a.framesDelay[i.frame]&&(i.frame++,i.status="playing",i.frame>a.textures.length-1&&(i.frame=0,i.loops++,a.temp.loop>0&&i.loops>=a.temp.loop&&("function"==typeof r&&r(i),i.status="played",a.runEvent("played",i),a.stop())),a.sprite.texture=a.textures[i.frame],s=0,a.runEvent("playing",i))}),this.temp.tickerIsAdd=!0),this.ticker.start()}},n.pause=function(){var e=this,t=e.__status;e.ticker.stop(),t.status="pause",e.runEvent("pause",t)},n.stop=function(){var e=this,t=e.__status;e.ticker.stop(),t.status="stop",e.runEvent("stop",t)},n.jumpToFrame=function(e){var t=this,r=t.textures;if(!r.length)throw new Error("没有可用的textures");var a=t.__status;"number"==typeof(e=e<0?0:e>r.length-1?r.length-1:e)&&(t.sprite.texture=r[e],a.frame=e)},n.getDuration=function(){var e=this.framesDelay;if(!e.length)throw new Error("未找到图片帧时间");for(var t=0,r=0,a=e.length;r<a;r++)t+=e[r];return t},n.getFramesLength=function(){if(!this.textures.length)throw new Error("没有可用的textures");return this.textures.length},n.on=function(e,t){switch(e){case"playing":case"played":case"pause":case"stop":this.temp.events[e]=t;break;default:throw new Error("无效的事件")}},n.runEvent=function(e,t){var r=this.temp;"function"==typeof r.events[e]&&r.events[e](t)},n.createSprite=function(e,t){var a,i=this,n=e,s=(a=n.toLocaleLowerCase().split("."))[a.length-1];return{gif:function(){var e=i.gifResourceToTextures(t[n]);return i.textures=e.textures,i.framesDelay=e.delayTimes,i.play(),new r.Sprite(i.textures[0])},png:function(){var e=i.apngResourceToTextures(t[n]);return i.textures=e.textures,i.framesDelay=e.delayTimes,i.play(),new r.Sprite(i.textures[0])},other:function(){return i.textures=[t[n].texture],new r.Sprite(t[n].texture)}}[s="gif"===s||"png"===s?s:"other"]()},n.apngResourceToTextures=function(e){var t,r,n,s,o={delayTimes:[],textures:[]},f=function(e){for(var t,r=new Uint8Array(e),a=8,i=l,n=i.readUshort,s=i.readUint,o={tabs:{},frames:[],ctype:null,data:null,width:null,height:null,compress:null,interlace:null,filter:null},f=new Uint8Array(r.length),u=0,c=0,d=[137,80,78,71,13,10,26,10],v=0;v<8;v++)if(r[v]!=d[v])throw"The input is not a PNG file!";for(;a<r.length;){var p=i.readUint(r,a),m=i.readASCII(r,a+=4,4);if(a+=4,"IHDR"==m)h._IHDR(r,a,o);else if("IDAT"==m){for(var g=0;g<p;g++)f[u+g]=r[a+g];u+=p}else if("acTL"==m)o.tabs[m]={num_frames:s(r,a),num_plays:s(r,a+4)},t=new Uint8Array(r.length);else if("fcTL"==m){if(0!=c){var w=o.frames[o.frames.length-1];w.data=h._decompress(o,t.slice(0,c),w.rect.width,w.rect.height),c=0}var y={x:s(r,a+12),y:s(r,a+16),width:s(r,a+4),height:s(r,a+8)},b=n(r,a+22);b=n(r,a+20)/(0==b?100:b);var x={rect:y,delay:Math.round(1e3*b),dispose:r[a+24],blend:r[a+25]};o.frames.push(x)}else if("fdAT"==m){for(var _=0;_<p-4;_++)t[c+_]=r[a+_+4];c+=p-4}else if("pHYs"==m)o.tabs[m]=[i.readUint(r,a),i.readUint(r,a+4),r[a+8]];else if("cHRM"==m){o.tabs[m]=[];for(var I=0;I<8;I++)o.tabs[m].push(i.readUint(r,a+4*I))}else if("tEXt"==m){null==o.tabs[m]&&(o.tabs[m]={});var A=i.nextZero(r,a),k=i.readASCII(r,a,A-a),U=i.readASCII(r,A+1,a+p-A-1);o.tabs[m][k]=U}else if("iTXt"==m){null==o.tabs[m]&&(o.tabs[m]={});var T=0,E=a;T=i.nextZero(r,E);var S=i.readASCII(r,E,T-E);E=T+1,T=i.nextZero(r,E+=2),i.readASCII(r,E,T-E),T=i.nextZero(r,E=T+1),i.readUTF8(r,E,T-E);var R=i.readUTF8(r,E=T+1,p-(E-a));o.tabs[m][S]=R}else if("PLTE"==m)o.tabs[m]=i.readBytes(r,a,p);else if("hIST"==m){var C=o.tabs.PLTE.length/3;o.tabs[m]=[];for(var D=0;D<C;D++)o.tabs[m].push(n(r,a+2*D))}else if("tRNS"==m)3==o.ctype?o.tabs[m]=i.readBytes(r,a,p):0==o.ctype?o.tabs[m]=n(r,a):2==o.ctype&&(o.tabs[m]=[n(r,a),n(r,a+2),n(r,a+4)]);else if("gAMA"==m)o.tabs[m]=i.readUint(r,a)/1e5;else if("sRGB"==m)o.tabs[m]=r[a];else if("bKGD"==m)0==o.ctype||4==o.ctype?o.tabs[m]=[n(r,a)]:2==o.ctype||6==o.ctype?o.tabs[m]=[n(r,a),n(r,a+2),n(r,a+4)]:3==o.ctype&&(o.tabs[m]=r[a]);else if("IEND"==m)break;i.readUint(r,a+=p),a+=4}if(0!=c){var B=o.frames[o.frames.length-1];B.data=h._decompress(o,t.slice(0,c),B.rect.width,B.rect.height),c=0}return o.data=h._decompress(o,f,o.width,o.height),delete o.compress,delete o.interlace,delete o.filter,o}(new Uint8Array(e.data)),d=function(e){var t=e.width,r=e.height;if(null==e.tabs.acTL)return[u.decodeImage(e.data,t,r,e).buffer];var a=[];null==e.frames[0].data&&(e.frames[0].data=e.data);for(var i,n=new Uint8Array(t*r*4),s=0;s<e.frames.length;s++){var o=e.frames[s],f=o.rect.x,h=o.rect.y,l=o.rect.width,d=o.rect.height,v=u.decodeImage(o.data,l,d,e);if(0==s?i=v:0==o.blend?c(v,l,d,i,t,r,f,h,0):1==o.blend&&c(v,l,d,i,t,r,f,h,1),a.push(i.buffer),i=i.slice(0),0==o.dispose);else if(1==o.dispose)c(n,l,d,i,t,r,f,h,0);else if(2==o.dispose){for(var p=s-1;2==e.frames[p].dispose;)p--;i=new Uint8Array(a[p]).slice(0)}}return a}(f),v=f.width,p=f.height;f.frames.forEach(function(e,t){o.delayTimes.push(e.delay)});for(var m=0,g=d.length;m<g;m++){var w=new Uint8ClampedArray(d[m]);(r=document.createElement("canvas")).width=v,r.height=p,n=r.getContext("2d"),t=a.BaseTexture.from(r),(s=n.createImageData(v,p)).data.set(w),n.putImageData(s,0,0),o.textures.push(new a.Texture(t,new i.Rectangle(0,0,v,p)))}return o},n.gifResourceToTextures=function(e){for(var t,r,n,s,f,u={delayTimes:[],textures:[]},h=new Uint8Array(e.data),l=new o(h),c=l.width,d=l.height,v=l.numFrames(),p=0;p<v;p++)t=l.frameInfo(p),u.delayTimes.push(10*t.delay),(n=document.createElement("canvas")).width=c,n.height=d,f=(s=n.getContext("2d")).createImageData(c,d),l.decodeAndBlitFrameRGBA(p,f.data),s.putImageData(f,0,0),r=a.BaseTexture.from(n),u.textures.push(new a.Texture(r,new i.Rectangle(0,0,c,d)));return u},e}()});
//# sourceMappingURL=PixiApngAndGif.umd.js.map
